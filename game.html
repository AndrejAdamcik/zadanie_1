<!DOCTYPE html>
<html lang="sk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake - Hra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Outfit', sans-serif;
            touch-action: none;
            /* Prevent scrolling on mobile while playing */
        }

        .blob {
            position: absolute;
            filter: blur(40px);
            z-index: -1;
            opacity: 0.6;
            animation: move 10s infinite alternate;
        }

        @keyframes move {
            from {
                transform: translate(0, 0) scale(1);
            }

            to {
                transform: translate(20px, -20px) scale(1.1);
            }
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        canvas {
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#10B981',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-slate-50 text-slate-800 overflow-hidden relative h-screen flex flex-col">

    <!-- Background Gradients -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div
            class="blob bg-purple-300 w-96 h-96 rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2 mix-blend-multiply">
        </div>
        <div
            class="blob bg-cyan-300 w-96 h-96 rounded-full bottom-0 right-0 translate-x-1/2 translate-y-1/2 mix-blend-multiply animation-delay-2000">
        </div>
    </div>

    <!-- Navigation (Simplified) -->
    <nav class="w-full z-50 py-4 px-6 glass-card shadow-sm flex justify-between items-center">
        <div class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
            SNAKE
        </div>
        <a href="index.html"
            class="text-slate-600 hover:text-primary transition-colors font-medium flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd"
                    d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                    clip-rule="evenodd" />
            </svg>
            Späť
        </a>
    </nav>

    <!-- Game Container -->
    <main class="flex-grow flex items-center justify-center p-4 relative">
        <div
            class="glass-card p-6 rounded-3xl shadow-2xl relative max-w-4xl w-full flex flex-col md:flex-row gap-8 items-center justify-center">

            <!-- Game Info -->
            <div class="flex flex-col gap-6 w-full md:w-48 text-center md:text-left">
                <div>
                    <h2 class="text-sm uppercase tracking-wider text-slate-500 font-bold mb-1">Skóre</h2>
                    <div id="score" class="text-4xl font-bold text-primary">0</div>
                </div>
                <div>
                    <h2 class="text-sm uppercase tracking-wider text-slate-500 font-bold mb-1">Najlepšie</h2>
                    <div id="highScore" class="text-2xl font-bold text-slate-700">0</div>
                </div>

                <div class="hidden md:block mt-auto">
                    <h3 class="text-sm font-bold text-slate-400 mb-2">Ovládanie</h3>
                    <div class="grid grid-cols-3 gap-1 max-w-[120px] mx-auto md:mx-0">
                        <div></div>
                        <div
                            class="w-8 h-8 border border-slate-300 rounded flex items-center justify-center text-slate-400">
                            ↑</div>
                        <div></div>
                        <div
                            class="w-8 h-8 border border-slate-300 rounded flex items-center justify-center text-slate-400">
                            ←</div>
                        <div
                            class="w-8 h-8 border border-slate-300 rounded flex items-center justify-center text-slate-400">
                            ↓</div>
                        <div
                            class="w-8 h-8 border border-slate-300 rounded flex items-center justify-center text-slate-400">
                            →</div>
                    </div>
                </div>
            </div>

            <!-- Canvas Container -->
            <div class="relative rounded-xl overflow-hidden shadow-inner border-4 border-slate-100 bg-slate-50">
                <canvas id="gameCanvas" width="400" height="400" class="block"></canvas>

                <!-- Start/Game Over Overlay -->
                <div id="overlay"
                    class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm flex flex-col items-center justify-center text-white z-10 transition-opacity duration-300">
                    <h2 id="overlayTitle"
                        class="text-4xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
                        SNAKE</h2>
                    <p id="overlaySubtitle" class="text-slate-300 mb-6">Stlač medzerník pre štart</p>
                    <button id="startBtn"
                        class="px-8 py-3 bg-primary hover:bg-indigo-600 text-white rounded-full font-bold shadow-lg shadow-indigo-500/40 transition-all hover:scale-105">
                        Hrať
                    </button>
                </div>
            </div>

        </div>
    </main>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const highScoreElement = document.getElementById('highScore');
        const overlay = document.getElementById('overlay');
        const overlayTitle = document.getElementById('overlayTitle');
        const overlaySubtitle = document.getElementById('overlaySubtitle');
        const startBtn = document.getElementById('startBtn');

        // Game constants
        const GRID_SIZE = 20;
        const TILE_COUNT = 20; // 400px / 20px
        const GAME_SPEED = 100;

        // Game state
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        let snake = [];
        let food = { x: 0, y: 0 };
        let dx = 0;
        let dy = 0;
        let gameLoop;
        let isGameRunning = false;
        let isGameOver = false;

        highScoreElement.textContent = highScore;

        function initGame() {
            snake = [
                { x: 10, y: 10 },
                { x: 9, y: 10 },
                { x: 8, y: 10 }
            ];
            score = 0;
            scoreElement.textContent = score;
            dx = 1;
            dy = 0;
            isGameOver = false;
            isGameRunning = true;
            spawnFood();
            overlay.classList.add('opacity-0', 'pointer-events-none');

            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, GAME_SPEED);
        }

        function spawnFood() {
            food = {
                x: Math.floor(Math.random() * TILE_COUNT),
                y: Math.floor(Math.random() * TILE_COUNT)
            };
            // Check if food spawned on snake
            for (let part of snake) {
                if (part.x === food.x && part.y === food.y) {
                    spawnFood();
                    break;
                }
            }
        }

        function update() {
            if (!isGameRunning) return;

            // Move snake
            const head = { x: snake[0].x + dx, y: snake[0].y + dy };

            // Check collisions
            if (head.x < 0 || head.x >= TILE_COUNT || head.y < 0 || head.y >= TILE_COUNT) {
                gameOver();
                return;
            }

            for (let part of snake) {
                if (head.x === part.x && head.y === part.y) {
                    gameOver();
                    return;
                }
            }

            snake.unshift(head);

            // Check food
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                scoreElement.textContent = score;
                if (score > highScore) {
                    highScore = score;
                    highScoreElement.textContent = highScore;
                    localStorage.setItem('snakeHighScore', highScore);
                }
                spawnFood();
            } else {
                snake.pop();
            }

            draw();
        }

        function draw() {
            // Clear canvas
            ctx.fillStyle = '#f8fafc'; // slate-50
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw grid (subtle)
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 0.5;
            for (let i = 0; i < TILE_COUNT; i++) {
                ctx.beginPath();
                ctx.moveTo(i * GRID_SIZE, 0);
                ctx.lineTo(i * GRID_SIZE, canvas.height);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(0, i * GRID_SIZE);
                ctx.lineTo(canvas.width, i * GRID_SIZE);
                ctx.stroke();
            }

            // Draw Food
            ctx.fillStyle = '#10B981'; // secondary
            ctx.beginPath();
            ctx.arc(
                food.x * GRID_SIZE + GRID_SIZE / 2,
                food.y * GRID_SIZE + GRID_SIZE / 2,
                GRID_SIZE / 2 - 2,
                0,
                Math.PI * 2
            );
            ctx.fill();
            // Food glow
            ctx.shadowColor = '#10B981';
            ctx.shadowBlur = 10;
            ctx.fill();
            ctx.shadowBlur = 0;

            // Draw Snake
            snake.forEach((part, index) => {
                // Gradient for snake
                if (index === 0) {
                    ctx.fillStyle = '#4F46E5'; // primary head
                } else {
                    // Fade tail color
                    ctx.fillStyle = `rgba(79, 70, 229, ${1 - index / (snake.length + 5)})`;
                }

                ctx.beginPath();
                // Rounded rectangles for snake parts
                const radius = 4;
                const x = part.x * GRID_SIZE + 1;
                const y = part.y * GRID_SIZE + 1;
                const size = GRID_SIZE - 2;

                ctx.roundRect(x, y, size, size, radius);
                ctx.fill();
            });
        }

        function gameOver() {
            isGameRunning = false;
            isGameOver = true;
            clearInterval(gameLoop);

            overlayTitle.textContent = 'Koniec Hry';
            overlaySubtitle.textContent = `Dosiahnuté skóre: ${score}`;
            startBtn.textContent = 'Hrať Znovu';
            overlay.classList.remove('opacity-0', 'pointer-events-none');
        }

        // Input handling
        document.addEventListener('keydown', (e) => {
            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' '].includes(e.key)) {
                e.preventDefault();
            }

            if (e.key === ' ' && !isGameRunning) {
                initGame();
                return;
            }

            if (!isGameRunning) return;

            switch (e.key) {
                case 'ArrowUp':
                    if (dy !== 1) { dx = 0; dy = -1; }
                    break;
                case 'ArrowDown':
                    if (dy !== -1) { dx = 0; dy = 1; }
                    break;
                case 'ArrowLeft':
                    if (dx !== 1) { dx = -1; dy = 0; }
                    break;
                case 'ArrowRight':
                    if (dx !== -1) { dx = 1; dy = 0; }
                    break;
            }
        });

        startBtn.addEventListener('click', initGame);

        // Initial draw
        draw();

    </script>
</body>

</html>